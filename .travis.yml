language: node_js
node_js:
  - "node"
  - "iojs"

  - "0.12"
  - "0.11"
  - "0.10"

env:
  - LLVM_VERSION=3.4
  - LLVM_VERSION=3.5
  - LLVM_VERSION=3.6
  - LLVM_VERSION=3.7

before_install:
  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key|sudo apt-key add -
  - echo "deb http://llvm.org/apt/precise/ llvm-toolchain-precise-$LLVM_VERSION main" | sudo tee -a /etc/apt/sources.list
  - echo "deb-src http://llvm.org/apt/precise/ llvm-toolchain-precise-$LLVM_VERSION main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install llvm-$LLVM_VERSION llvm-$LLVM_VERSION-runtime libllvm$LLVM_VERSION llvm-$LLVM_VERSION-dev

before_script:
  - llc -version || true

script:
  - npm run-script clean
  - npm run-script build
  - npm test
